<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R-project-patent</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="R-project-patent_files/libs/clipboard/clipboard.min.js"></script>
<script src="R-project-patent_files/libs/quarto-html/quarto.js"></script>
<script src="R-project-patent_files/libs/quarto-html/popper.min.js"></script>
<script src="R-project-patent_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="R-project-patent_files/libs/quarto-html/anchor.min.js"></script>
<link href="R-project-patent_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="R-project-patent_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="R-project-patent_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="R-project-patent_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="R-project-patent_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">R-project-patent</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="quarto-document" class="level2">
<h2 class="anchored" data-anchor-id="quarto-document">quarto document</h2>
</section>
<section id="link-to-the-github-repository" class="level2">
<h2 class="anchored" data-anchor-id="link-to-the-github-repository">Link to the Github Repository</h2>
<p>https://github.com/brl-noe/R-project-patent.git</p>
</section>
<section id="loading-the-library" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-library">Loading the library</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vroom)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="short-description-of-the-sources" class="level2">
<h2 class="anchored" data-anchor-id="short-description-of-the-sources">Short description of the sources</h2>
<p>For our analysis, we will use tree different datasets all coming from the Eurostat public database. The common key indicator of the 3 datasets is <code>geo</code> that refers to the name of the country. This variable will be useful to associate datasets with each other. Another commmon variable to the 3 datasets is <code>unit</code> (percentage or a row value of the observed variable).</p>
<p>Then, the first dataset called patent has as oberved value the number of requests for patent protection of an invention filed with the European Patent Office (EPO) regardless of whether they are granted or not. Here, we see a limit in our analysis coming from the last fact. Indeed, later on the analysis, we will proxy the level of innovation in a country based on this observed value of application for patent however we don’t actually know if the patent is granted or not, we mainly know which country (<code>geo</code>) applied for how many a patent each year.</p>
<p>The second dataset called education contains mainly contains the variable <code>isced11</code>. <code>isced11</code> is an indication of the the educational attainment level of an individual with each individual being in between 15 and 64 years old (variable <code>age</code>). The educational attaiment level corresponds to the highest ISCED (International Standard Classification of Education) level successfully completed, the successful completion of an education programme being validated by a recognised qualification, in other word a qualification officially recognised by the relevant national education authorities or recognised as equivalent to another qualification of formal education. The ISCED for 2011 are as following:</p>
<p>Level 0 – Less than primary education Level 1 – Primary education Level 2 – Lower secondary education Level 3 – Upper secondary education Level 4 – Post-secondary non-tertiary education Level 5 – Short-cycle tertiary education Level 6 – Bachelor’s or equivalent level Level 7 – Master’s or equivalent level Level 8 – Doctoral or equivalent level</p>
<p>The third dataset called key_indicator encompass non-financial accounts that provide a description of the different stages of the economic process (variable <code>na_item</code>): production, generation of income, distribution of income, redistribution of income, use of income and non-financial accumulation. These stages are estimated in percentage for different sectors and agents of the economy of the country.</p>
</section>
<section id="loading-the-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-data">Loading the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>here<span class="sc">::</span><span class="fu">i_am</span>(<span class="st">"R-project-patent.Rproj"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>here() starts at C:/Users/MAEL/OneDrive/Bureau/M1/Data mangement et programming/R-project-patent</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Loading patent data</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>patent <span class="ot">&lt;-</span> <span class="fu">vroom</span>(<span class="fu">here</span>(<span class="st">"patent.tsv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 152 Columns: 21
── Column specification ────────────────────────────────────────────────────────
Delimiter: "\t"
chr (19): freq,coop_ptn,unit,geo\TIME_PERIOD, 2004, 2005, 2006, 2007, 2008, ...
dbl  (2): 2013, 2016

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Loading key indicator data</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>key_indicator <span class="ot">&lt;-</span> <span class="fu">vroom</span>(<span class="fu">here</span>(<span class="st">"key_indicator.tsv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 682 Columns: 76
── Column specification ────────────────────────────────────────────────────────
Delimiter: "\t"
chr (76): freq,unit,na_item,sector,geo\TIME_PERIOD, 1949, 1950, 1951, 1952, ...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Loading education data</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>education <span class="ot">&lt;-</span> <span class="fu">vroom</span>(<span class="fu">here</span>(<span class="st">"education.tsv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 6714 Columns: 33
── Column specification ────────────────────────────────────────────────────────
Delimiter: "\t"
chr (33): freq,sex,age,unit,isced11,geo\TIME_PERIOD, 1992, 1993, 1994, 1995,...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
</section>
<section id="basics-informations-about-the-dabases" class="level2">
<h2 class="anchored" data-anchor-id="basics-informations-about-the-dabases">Basics informations about the dabases</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to generate a data summary</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>get_data_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  rows <span class="ot">&lt;-</span> <span class="fu">nrow</span>(df)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> <span class="fu">ncol</span>(df)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  sample <span class="ot">&lt;-</span> <span class="fu">head</span>(df)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumRows =</span> rows,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">NumCols =</span> cols,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">SampleData =</span> sample</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Get summaries for each dataset</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>patent_summary <span class="ot">&lt;-</span> <span class="fu">get_data_summary</span>(patent)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>key_indicator_summary <span class="ot">&lt;-</span> <span class="fu">get_data_summary</span>(key_indicator)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>education_summary <span class="ot">&lt;-</span> <span class="fu">get_data_summary</span>(education)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the summaries into a single data frame</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>data_summaries <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">Dataset =</span> <span class="fu">c</span>(<span class="st">"Patent"</span>, <span class="st">"Key Indicator"</span>, <span class="st">"Education"</span>),</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">NumRows =</span> <span class="fu">c</span>(patent_summary<span class="sc">$</span>NumRows, key_indicator_summary<span class="sc">$</span>NumRows, education_summary<span class="sc">$</span>NumRows),</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">NumCols =</span> <span class="fu">c</span>(patent_summary<span class="sc">$</span>NumCols, key_indicator_summary<span class="sc">$</span>NumCols, education_summary<span class="sc">$</span>NumCols),</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">SampleData =</span> <span class="fu">list</span>(patent_summary<span class="sc">$</span>SampleData, key_indicator_summary<span class="sc">$</span>SampleData, education_summary<span class="sc">$</span>SampleData),</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the summary data frame</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(data_summaries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Dataset NumRows NumCols SampleData.freq.coop_ptn.unit.geo.TIME_PERIOD
1        Patent     152      21                                  A,APPL,NR,AL
2 Key Indicator     682      76                                  A,APPL,NR,AT
3     Education    6714      33                                  A,APPL,NR,BA
4        Patent     152      21                                  A,APPL,NR,BE
5 Key Indicator     682      76                                  A,APPL,NR,BG
6     Education    6714      33                                  A,APPL,NR,CH
  SampleData.2004 SampleData.2005 SampleData.2006 SampleData.2007
1               :               :               :               :
2            1000            1053            1146            1382
3               :               :               :               :
4            1493            1658            1842            1898
5              16              11              12              16
6            4663            5027            5503            5871
  SampleData.2008 SampleData.2009 SampleData.2010 SampleData.2011
1               :               1               0               0
2            1503            1496            1744            1734
3               :               1               2               0
4            1899            1629            2045            2014
5              15              19              11              16
6            5942            5887            6864            6553
  SampleData.2012 SampleData.2013 SampleData.2014 SampleData.2015
1               0               0               3               0
2            1874            1993            1964            1989
3               3               1               0               0
4            1886            1882            1927            2041
5              13              23              34              33
6            6746            6742            6910            7116
  SampleData.2016 SampleData.2017 SampleData.2018 SampleData.2019
1               2               0               0               2
2            2024            2209            2281            2346
3               2               0               1               2
4            2211            2152            2348            2422
5              20              32              31              35
6            7302            7354            7961            8266
  SampleData.2020 SampleData.2021 SampleData.2022 SampleData.2023
1               0               3               7             8 p
2            2306            2309            2381          2355 p
3               4               1               7             8 p
4            2406            2480            2603          2547 p
5              54              43              46            40 p
6            8125            8504            9160          9410 p
  SampleData.freq.unit.na_item.sector.geo.TIME_PERIOD SampleData.1949
1                         A,PC,B2G_B3G_RAT_S11,S11,AL               :
2                         A,PC,B2G_B3G_RAT_S11,S11,AT               :
3                         A,PC,B2G_B3G_RAT_S11,S11,BE               :
4                         A,PC,B2G_B3G_RAT_S11,S11,BG               :
5                         A,PC,B2G_B3G_RAT_S11,S11,CH               :
6                         A,PC,B2G_B3G_RAT_S11,S11,CY               :
  SampleData.1950 SampleData.1951 SampleData.1952 SampleData.1953
1               :               :               :               :
2               :               :               :               :
3               :               :               :               :
4               :               :               :               :
5               :               :               :               :
6               :               :               :               :
  SampleData.1954 SampleData.1955 SampleData.1956 SampleData.1957
1               :               :               :               :
2               :               :               :               :
3               :               :               :               :
4               :               :               :               :
5               :               :               :               :
6               :               :               :               :
  SampleData.1958 SampleData.1959 SampleData.1960 SampleData.1961
1               :               :               :               :
2               :               :               :               :
3               :               :               :               :
4               :               :               :               :
5               :               :               :               :
6               :               :               :               :
  SampleData.1962 SampleData.1963 SampleData.1964 SampleData.1965
1               :               :               :               :
2               :               :               :               :
3               :               :               :               :
4               :               :               :               :
5               :               :               :               :
6               :               :               :               :
  SampleData.1966 SampleData.1967 SampleData.1968 SampleData.1969
1               :               :               :               :
2               :               :               :               :
3               :               :               :               :
4               :               :               :               :
5               :               :               :               :
6               :               :               :               :
  SampleData.1970 SampleData.1971 SampleData.1972 SampleData.1973
1               :               :               :               :
2               :               :               :               :
3               :               :               :               :
4               :               :               :               :
5               :               :               :               :
6               :               :               :               :
  SampleData.1974 SampleData.1975 SampleData.1976 SampleData.1977
1               :               :               :               :
2               :               :               :               :
3               :               :               :               :
4               :               :               :               :
5               :               :               :               :
6               :               :               :               :
  SampleData.1978 SampleData.1979 SampleData.1980 SampleData.1981
1               :               :               :               :
2               :               :               :               :
3               :               :               :               :
4               :               :               :               :
5               :               :               :               :
6               :               :               :               :
  SampleData.1982 SampleData.1983 SampleData.1984 SampleData.1985
1               :               :               :               :
2               :               :               :               :
3               :               :               :               :
4               :               :               :               :
5               :               :               :               :
6               :               :               :               :
  SampleData.1986 SampleData.1987 SampleData.1988 SampleData.1989
1               :               :               :               :
2               :               :               :               :
3               :               :               :               :
4               :               :               :               :
5               :               :               :               :
6               :               :               :               :
  SampleData.1990 SampleData.1991 SampleData.1992 SampleData.1993
1               :               :               :               :
2               :               :               :               :
3               :               :               :               :
4               :               :               :               :
5               :               :               :               :
6               :               :               :               :
  SampleData.1994 SampleData.1995 SampleData.1996 SampleData.1997
1               :               :               :               :
2               :           36.92           38.19           39.97
3               :           36.53           36.25           36.52
4               :           59.69           57.94           47.86
5               :           35.81           35.93           32.90
6               :           55.49           54.99           54.58
  SampleData.1998 SampleData.1999 SampleData.2000 SampleData.2001
1               :               :               :               :
2           40.52           40.75           41.37           42.28
3           36.97           35.67           36.62           35.43
4           50.76           41.84           46.51           49.66
5           33.48           32.87           33.17           32.82
6           55.67           56.22           57.51           58.25
  SampleData.2002 SampleData.2003 SampleData.2004.1 SampleData.2005.1
1               :               :                 :                 :
2           42.54           42.99             44.68             45.87
3           35.46           37.08             39.11             40.40
4           53.69           52.77             53.94             51.99
5           31.30           30.99             32.85             33.72
6           56.23           53.56             52.02             47.69
  SampleData.2006.1 SampleData.2007.1 SampleData.2008.1 SampleData.2009.1
1                 :                 :                 :                 :
2             46.34             46.67             44.55             42.97
3             40.56             41.58             40.02           37.79 b
4             52.83             52.66             48.96             52.58
5             35.30             34.77             34.55             32.24
6             46.09             42.50             41.61             38.32
  SampleData.2010.1 SampleData.2011.1 SampleData.2012.1 SampleData.2013.1
1                 :                 :                 :           44.49 p
2             43.25             43.31             42.30             40.76
3             39.71             40.11             38.47             38.53
4             49.13             51.23             51.03             48.58
5             34.97             33.97             33.77             33.33
6             39.85             39.60             37.85             40.70
  SampleData.2014.1 SampleData.2015.1 SampleData.2016.1 SampleData.2017.1
1           44.86 p           37.45 p           32.97 p           35.31 p
2             40.96             41.34             41.75             41.45
3             39.16             40.34             40.85             40.70
4             47.09             49.31             48.04             48.19
5             33.78             32.69             33.17             33.29
6             37.77             38.33             40.57             40.34
  SampleData.2018.1 SampleData.2019.1 SampleData.2020.1 SampleData.2021.1
1                 :                 :                 :                 :
2             41.53             40.55             43.91             44.11
3             41.00             41.74             43.19             43.77
4                 :                 :                 :                 :
5             34.67             32.94             31.96             36.00
6             41.54             39.18             39.64             42.59
  SampleData.2022.1 SampleData.2023.1
1                 :                 :
2             41.68             38.54
3             45.20           42.43 p
4                 :                 :
5           35.91 p           34.32 p
6             37.80           34.92 p
  SampleData.freq.sex.age.unit.isced11.geo.TIME_PERIOD SampleData.1992.1
1                               A,F,Y15-64,PC,ED0-2,AT                 :
2                               A,F,Y15-64,PC,ED0-2,BA                 :
3                               A,F,Y15-64,PC,ED0-2,BE              50.9
4                               A,F,Y15-64,PC,ED0-2,BG                 :
5                               A,F,Y15-64,PC,ED0-2,CH                 :
6                               A,F,Y15-64,PC,ED0-2,CY                 :
  SampleData.1993.1 SampleData.1994.1 SampleData.1995.1 SampleData.1996.1
1                 :                 :              41.4              39.6
2                 :                 :                 :                 :
3              50.5              48.8              47.7              45.2
4                 :                 :                 :                 :
5                 :                 :                 :              26.6
6                 :                 :                 :                 :
  SampleData.1997.1 SampleData.1998.1 SampleData.1999.1 SampleData.2000.1
1              36.6              36.0              35.3               : u
2                 :                 :                 :                 :
3              44.0              44.3            43.5 d              41.8
4                 :                 :                 :              35.4
5              26.5              30.3              29.3              28.7
6                 :                 :              43.9              41.2
  SampleData.2001.1 SampleData.2002.1 SampleData.2003.1 SampleData.2004.2
1               : u               : u               : u            28.4 b
2                 :                 :                 :                 :
3              41.4              40.0              39.0              37.6
4            32.7 b              32.4              33.4              33.5
5              28.3              27.5              28.3              27.7
6              40.7              38.1              39.2              39.7
  SampleData.2005.2 SampleData.2006.2 SampleData.2007.2 SampleData.2008.2
1              28.2            29.6 b              30.0              28.8
2                 :                 :                 :                 :
3              35.9              35.0              34.4            33.0 b
4              32.7            30.2 b              28.2              28.0
5              27.0              25.0              23.7              23.0
6              36.6              33.5              31.0              30.7
  SampleData.2009.2 SampleData.2010.2 SampleData.2011.2 SampleData.2012.2
1              28.0              27.0              26.6              25.9
2                 :                 :                 :                 :
3              31.7              31.7              30.7              30.1
4              27.5            25.0 b            23.9 b              22.9
5              23.2            23.5 b              23.7              22.5
6            31.4 b              29.5              27.5              26.4
  SampleData.2013.2 SampleData.2014.2 SampleData.2015.2 SampleData.2016.2
1              25.4            23.2 b              22.5              22.1
2                 :                 :                 :                 :
3              29.0            28.1 b              27.3              27.1
4              21.9            22.0 b              21.5              21.3
5              21.2            19.7 b              19.3              19.1
6              25.0            25.3 b              24.8              22.8
  SampleData.2017.2 SampleData.2018.2 SampleData.2019.2 SampleData.2020.2
1              21.4              21.1              20.5              20.3
2                 :                 :                 :                 :
3            26.0 b              25.1              24.0              23.2
4              21.0              20.9            21.0 b              20.5
5              18.6              17.8              16.8              16.6
6              22.2              20.6              20.0              19.7
  SampleData.2021.2 SampleData.2022.2 SampleData.2023.2
1            20.0 b              19.9              19.9
2              28.8              28.4              27.9
3            21.2 b              20.5              21.3
4            20.2 b              19.4              18.3
5            18.0 b              19.0              18.9
6            18.4 b              17.1            16.0 b</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the sample data for each dataset</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(data_summaries)) {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">"Sample data for "</span>, data_summaries<span class="sc">$</span>Dataset[i], <span class="st">":</span><span class="sc">\n</span><span class="st">"</span>))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(data_summaries<span class="sc">$</span>SampleData[[i]])</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sample data for Patent:
NULL

Sample data for Key Indicator:
NULL

Sample data for Education:
NULL

Sample data for Patent:
NULL

Sample data for Key Indicator:
NULL

Sample data for Education:
NULL</code></pre>
</div>
</div>
</section>
<section id="description-of-the-data-joining-cleaning-etc." class="level2">
<h2 class="anchored" data-anchor-id="description-of-the-data-joining-cleaning-etc.">Description of the data joining, cleaning, etc.</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>education <span class="ot">&lt;-</span> education <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">"freq,sex,age,unit,isced11,geo</span><span class="sc">\\</span><span class="st">TIME_PERIOD"</span>, </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"freq"</span>, <span class="st">"sex"</span>, <span class="st">"age"</span>, <span class="st">"unit"</span>, <span class="st">"isced11"</span>, <span class="st">"geo"</span>),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>patent <span class="ot">&lt;-</span> patent <span class="sc">%&gt;%</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">"freq,coop_ptn,unit,geo</span><span class="sc">\\</span><span class="st">TIME_PERIOD"</span>, </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"freq"</span>, <span class="st">"coop_ptn"</span>, <span class="st">"unit"</span>, <span class="st">"geo"</span>),</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>key_indicator <span class="ot">&lt;-</span> key_indicator <span class="sc">%&gt;%</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> <span class="st">"freq,unit,na_item,sector,geo</span><span class="sc">\\</span><span class="st">TIME_PERIOD"</span>, </span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"freq"</span>, <span class="st">"unit"</span>, <span class="st">"na_item"</span>, <span class="st">"sector"</span>, <span class="st">"geo"</span>),</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">","</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We used <code>separate()</code> that allows us to split a single column into multiple columns based on a separator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Join the datasets</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>combined_data <span class="ot">&lt;-</span> education <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(key_indicator, <span class="at">by =</span> <span class="st">"geo"</span>, <span class="at">relationship =</span> <span class="st">"many-to-many"</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>combined_data <span class="ot">&lt;-</span> combined_data <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(patent, <span class="at">by =</span> <span class="st">"geo"</span>, <span class="at">relationship =</span> <span class="st">"many-to-many"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>left_join()</code> function from the <code>dplyr</code> package will perform a left join between the datasets, using the “geo” column as the common key. This will ensure that all rows from the education dataset are included, with the corresponding data from the other two datasets.</p>
</section>
<section id="research-question" class="level2">
<h2 class="anchored" data-anchor-id="research-question">Research Question</h2>
<p>In early September, Mario Draghi revealed his plan to make the European Union more competitive. A key part of his plan is to invest billions in innovation. Patent applications serve as a proxy for innovation. A patent is an exclusive right granted for an invention, while a patent application refers to the legal and administrative process of requesting the issuance of a patent. This includes the content of the invention’s description and claims, along with the procedural paperwork involved. Therefore, it seems relevant to explore what factors influence the phenomenon of patent applications across European Union countries. Our research question is: <strong>What factors influence patent applications across European Union countries? A longitudinal analysis of education, innovation dynamics, and socioeconomic indicators.</strong></p>
<p>This study focuses on the role of education, innovation-related factors, and socioeconomic variables in explaining differences in patent activity across EU countries. We aim to determine whether higher educational attainment correlates with more patents and how economic factors, such as GDP, income inequality, and unemployment, influence this relationship.</p>
<p>Moreover, our study will employ a longitudinal analysis, allowing us to examine trends in patent applications and the evolution of the relationship between patent activity, education, and socioeconomic factors across European Union countries over time.We hypothesize that higher economic development is positively correlated with higher educational attainment and, in turn, with increased patent applications. In 2023, countries with the highest number of patent applications were also among the largest global economies (e.g., China ranked 1st, and the USA ranked 2nd), suggesting a link between economic strength and innovation output. This pattern implies that economic resources may facilitate investments in education and research, which are crucial drivers of technological advancement. Moreover, a World Bank article published in 2023 stated: <em>“Today, there is agreement that education, independent of innate ability, helps spur innovation and technology, and it contributes to productivity and economic growth.”</em> This further supports the idea that education plays a critical role in fostering innovation, reinforcing the need to investigate whether a similar relationship exists within European Union countries.</p>
<p>Our findings could help European policymakers allocate resources more effectively, ensuring that the billions of euros invested in innovation contribute to the European Union’s goal of remaining globally competitive. For instance, if we find that higher educational attainment correlates with higher patent applications, we would recommend that policymakers prioritize investments in education. This would potentially be more impactful and cost-effective than investing in other areas of the R&amp;D process, such as infrastructure.</p>
<section id="introcduction-by-a-study-of-a-key-variable" class="level3">
<h3 class="anchored" data-anchor-id="introcduction-by-a-study-of-a-key-variable">Introcduction by a study of a key variable</h3>
<p>Here we wanted to create a graph that shows the number of patent in function of the time. First we tried to use pivot_longer() to have one column with every year and each year is associated to a number of patent however even with trying different solutions, we didn’t get something satisfying. From our understanding the problem is coming from the fact that in the patent data set, some years are characters some others are numerical values. We tried to use as.numeric() and as.character() functions but it didn’t seem to give us a satisfying answer.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>